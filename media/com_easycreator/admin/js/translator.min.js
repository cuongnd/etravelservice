var ecrTranslator=new Class({copyTrans:function(){var a=this.stripQuotes(php2js.trim($("default").innerHTML));$("translation").value=a;$("translation").focus()},deleteTranslation:function(b,a){$("translation").value=jgettext("Deleting...");new Request({url:b+"&task=delete_translation",onComplete:function(c){var d=JSON.decode(c);if(d.status){$("ajResult").innerHTML='<strong style="color: red;">'+d.text+"</strong>";return false}doc=window.parent.document;doc.getElementById("trfield_"+a).innerHTML='<strong style="color: red">'+jgettext("Empty")+"</strong>";parent.SqueezeBox.close()}}).send()},stripQuotes:function(a){if(a.substr(0,1)=='"'){a=a.substr(1)}if(a.substr(a.length-1)=='"'){a=a.substr(0,a.length-1)}return a},google_translate:function(b){$("translation").value=jgettext("Translating...");if(!gbranding_displayed){google.language.getBranding("gtranslate_branding");gbranding_displayed=true}var a=this.stripQuotes(php2js.trim($("default").innerHTML));google.language.translate(a,"en",b,function(c){if(!c.error){$("translation").value=c.translation}})},translate:function(b,a,e,d,c){new Request({url:b+"&task=translate&translation="+encodeURIComponent($("translation").value),onRequest:function(){title=$("ajResult");title.innerHTML=jgettext("Saving...");title.addClass("ajax_loading16-red")},onComplete:function(f){var h=JSON.decode(f);title=$("ajResult");title.innerHTML=h.text;title.removeClass("ajax_loading16-red");if(h.status){title.addClass("img icon-16-cancel");$("ajaxDebug").innerHTML=h.debug;return false}doc=window.parent.document;switch(d){case"ini":doc.getElementById("trfield_"+a).innerHTML=$("translation").value;break;case"phpxml":doc.getElementById("trfield_"+a).innerHTML=e;doc.getElementById("trfield_"+a).style.color="green";if(c){c=c.split(",");for(var g=0;g<c.length;++g){doc.getElementById("trfield_"+c[g]).style.display="inline"}}break;default:alert("Undefined ret type: "+d);break}parent.SqueezeBox.close()}}).send()}});