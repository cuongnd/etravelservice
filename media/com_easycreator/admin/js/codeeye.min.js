var ecr_act_field;function setPath(b,a){$("dspl_sniff_folder").innerHTML=b;if(a){$("dspl_sniff_file").innerHTML=(a)?a:""}}function doPHPUnit(c,f,b,e){var a=new Date();if(ecr_act_field){$(ecr_act_field).setStyle("color","black")}$(e).setStyle("color","red");ecr_act_field=e;y=a.getFullYear();m=a.getMonth().toString();m=(m.length==1)?"0"+m:m;d=a.getDay().toString();d=(d.length==1)?"0"+d:d;h=a.getHours().toString();h=(h.length==1)?"0"+h:h;i=a.getMinutes().toString();i=(i.length==1)?"0"+i:i;s=a.getSeconds().toString();s=(s.length==1)?"0"+s:s;b=""+y+m+d+"_"+h+i+s;url=ecrAJAXLink+"&controller=codeeyeajax";url+="&task=phpunit";url+="&folder="+c;url+="&test="+f;url+="&time_stamp="+b;url+="&results_base="+$("results_base").value;new Request({url:url,onRequest:function(){$("ecr_title_file").innerHTML="CodeEye is looking PHPUnit...";$("ecr_title_file").className="ajax_loading16";$("ecr_codeeye_output").innerHTML=""},onComplete:function(g){$("ecr_title_file").innerHTML="";$("ecr_title_file").className="";var j=JSON.decode(g);if(!j.status){}$("ecr_codeeye_output").innerHTML=j.text;$("ecr_codeeye_console").innerHTML=j.console}}).send()}function doSelenium(b,e,a,c){url=ecrAJAXLink+"&controller=codeeyeajax";url+="&task=selenium";url+="&folder="+b;url+="&test="+e;url+="&time_stamp="+a;url+="&results_base="+$("results_base").value;new Request({url:url,onRequest:function(){$("ecr_title_file").innerHTML="CodeEye is looking Selenium...";$("ecr_title_file").className="ajax_loading16";$("ecr_codeeye_output").innerHTML=""},onComplete:function(f){$("ecr_title_file").innerHTML="";$("ecr_title_file").className="";var g=JSON.decode(f);if(!g.status){}$("ecr_codeeye_output").innerHTML=g.text;$("ecr_codeeye_console").innerHTML=g.console}}).send()}function doPHPCPD(a){url=ecrAJAXLink+"&controller=codeeyeajax";url+="&task=phpcpd";url+="&ecr_project="+a;url+="&path="+$("dspl_sniff_folder").innerHTML;url+="&min-lines="+$("phpcpd_min_lines").value;url+="&min-tokens="+$("phpcpd_min_tokens").value;new Request({url:url,onRequest:function(){$("ecr_title_file").innerHTML="CodeEye is looking PHPCPD...";$("ecr_title_file").className="ajax_loading16";$("ecr_codeeye_output").innerHTML="";$("ecr_codeeye_console").innerHTML=""},onComplete:function(b){var c=JSON.decode(b);if(!c.status){}$("ecr_title_file").innerHTML="";$("ecr_title_file").className="";$("ecr_codeeye_output").innerHTML=c.text;$("ecr_codeeye_console").innerHTML=c.console}}).send()}function doPHPDoc(b,a){url=ecrAJAXLink+"&controller=codeeyeajax";url+="&task=phpdoc";if($("phpdoc_quiet").checked==true){url+="&options[]=q"}if($("phpdoc_undocumented").checked==true){url+="&options[]=ue"}if($("phpdoc_sourcecode").checked==true){url+="&options[]=s"}if($("phpdoc_converter").value){url+="&converter="+$("phpdoc_converter").value}url+="&target_dir="+$("target_dir").value.replace("\\","/");b=b.replace("\\","/");url+="&parse_dirs="+b;a=a.replace("\\","/");url+="&parse_files="+a;new Request({url:url,onRequest:function(){$("ecr_title_file").innerHTML="PhpDocumentor is generating documentation...";$("ecr_title_file").className="ajax_loading16";$("ecr_codeeye_output").innerHTML="";$("ecr_codeeye_console").innerHTML=""},onComplete:function(c){var e=JSON.decode(c);if(!e.status){}$("ecr_title_file").innerHTML="";$("ecr_title_file").className="";$("ecr_codeeye_output").innerHTML=e.text;$("ecr_codeeye_console").innerHTML=e.console}}).send()}function sniffFolder(){folder=$("dspl_sniff_folder").innerHTML;if(!folder){alert("Please select a folder.");return false}loadSniff(folder)}function loadSniff(e,c){$("dspl_sniff_folder").innerHTML=e;$("dspl_sniff_file").innerHTML=(c)?c:"";e=(e)?e:$("dspl_sniff_folder").innerHTML;c=(c)?c:$("dspl_sniff_file").innerHTML;url=ecrAJAXLink+"&controller=codeeyeajax";url+="&task=phpcs";url+="&path="+e;url+="&file="+c;url+="&sniff_standard="+$("sniff_standard").value;url+="&sniff_format="+$("sniff_format").value;url+="&sniff_verbose="+$("sniff_verbose").checked;var a="";if(document.adminForm.sniff_sniffs){for(var b=0;b<document.adminForm.sniff_sniffs.length;b++){if(document.adminForm.sniff_sniffs[b].checked){a+=document.adminForm.sniff_sniffs[b].value+","}}}if(a!=""){url+="&sniff_sniffs="+a}var g={};var f={status:document.id("ecr_codeeye_output"),debug:document.id("ecr_codeeye_console"),display:document.id("ecr_codeeye_output")};startPoll();EcrLogconsole.url=url;EcrLogconsole.send(f,g,jgettext("CodeSniffer sniffing..."));return;new Request({url:url,onRequest:function(){$("ecr_title_file").innerHTML="CodeSniffer sniffing...";$("ecr_title_file").className="ajax_loading16";$("ecr_codeeye_output").innerHTML="";$("ecr_codeeye_console").innerHTML=""},onComplete:function(j){$("ecr_title_file").innerHTML="";$("ecr_title_file").className="";var k=JSON.decode(j);if(!k.status){}$("ecr_codeeye_output").innerHTML=k.message;$("ecr_codeeye_console").innerHTML=k.debug}}).send()}function create_skeleton(c,b){var a=ecrAJAXLink+"&controller=codeeyeajax&task=create_skeleton";a+="&ecr_project="+$("ecr_project").value;a+="&folder="+c;a+="&file="+b;new Request({url:a,onRequest:function(){$("ecr_title_file").innerHTML="CodeEye is creating a skeleton...";$("ecr_title_file").className="ajax_loading16";$("ecr_codeeye_output").innerHTML=""},onComplete:function(e){$("ecr_title_file").innerHTML="";$("ecr_title_file").className="";var g=JSON.decode(e);if(!g.status){$("test_tree").innerHTML=g.text;$("ecr_codeeye_console").innerHTML=g.console}else{$("ecr_codeeye_output").innerHTML=g.text;$("ecr_codeeye_console").innerHTML=g.console;var f=ecrAJAXLink+"&controller=codeeyeajax&task=draw_test_dir";f+="&ecr_project="+$("ecr_project").value;new Request({url:f,onRequest:function(){$("test_tree").innerHTML="Redraw tree..."},onComplete:function(j){var k=JSON.decode(j);if(!k.status){$("test_tree").innerHTML=k.text}$("test_tree").innerHTML=k.text}}).send()}}}).send()}function draw_test_dir(a){new Request({url:ecrAJAXLink+"&controller=codeeyeajax&task=draw_test_dir",onRequest:function(){$("ecr_title_file").innerHTML="CodeEye is checking your environment...";$("ecr_title_file").className="ajax_loading16";$("ecr_codeeye_output").innerHTML=""},onComplete:function(b){var c=JSON.decode(b);if(!c.status){}$("ecr_title_file").innerHTML="";$("ecr_title_file").className="";$("test_tree").innerHTML=c.text;$("ecr_codeeye_console").innerHTML=c.console}}).send()}function checkEnvironment(){new Request({url:ecrAJAXLink+"&controller=codeeyeajax&task=check_environment",onRequest:function(){$("ecr_title_file").innerHTML=jgettext("CodeEye is checking your environment...");$("ecr_title_file").className="ajax_loading16";$("ecr_codeeye_output").innerHTML=""},onComplete:function(a){var b=JSON.decode(a,true);if(!b.status){}$("ecr_title_file").innerHTML="";$("ecr_title_file").className="";$("ecr_codeeye_output").innerHTML=b.text;$("ecr_codeeye_console").innerHTML=b.console}}).send()}function gitStatus(){url=ecrAJAXLink+"&controller=codeeyeajax";url+="&task=gitStatus";new Request({url:url,onRequest:function(){document.id("ecr_codeeye_output").innerHTML="";document.id("ecr_codeeye_console").innerHTML=""},onComplete:function(a){var b=JSON.decode(a);if(!b.status){}document.id("ecr_codeeye_output").innerHTML=b.text;document.id("ecr_codeeye_console").innerHTML=b.console}}).send()}function runCli(a){url=ecrAJAXLink+"&controller=codeeyeajax&task=runCli&ecr_project="+a+"&args="+document.id("cliargs").value;new Request({url:url,onRequest:function(){document.id("ecr_codeeye_output").innerHTML="";document.id("ecr_codeeye_console").innerHTML=""},onComplete:function(b){var c=JSON.decode(b);if(!c.status){}document.id("ecr_codeeye_output").innerHTML=c.text;document.id("ecr_codeeye_console").innerHTML=c.console}}).send()}function phploc(a){url=ecrAJAXLink+"&controller=codeeyeajax";url+="&task=phploc";url+="&dir="+a;new Request({url:url,onRequest:function(){document.id("ecr_codeeye_output").innerHTML="";document.id("ecr_codeeye_console").innerHTML=""},onComplete:function(b){var c=JSON.decode(b);if(!c.status){}document.id("ecr_codeeye_output").innerHTML=c.text;document.id("ecr_codeeye_console").innerHTML=c.console}}).send()};