var EcrEasyCreator=new Class({Implements:[Options],options:{url:""},form:"",urlAdd:"",box:"",initialize:function(a){this.setOptions(a);this.form=document.adminForm},project:function(a,b){this.form.ecr_project.value=a;this.form.controller.value=b;submitbutton(b)}});window.addEvent("domready",function(){EasyCreator=new EcrEasyCreator()});function switchProject(){frm=document.adminForm;frm.controller.value="stuffer";$("ecr_stat_project").className="ajax_loading16";if(frm.file_name!=undefined){frm.file_name.value=""}if(frm.ecr_project.value=="ecr_new_project"){frm.controller.value="starter";$("ecr_stat_project").innerHTML=jgettext("New project...");submitform("starter");return}if(frm.ecr_project.value=="ecr_register_project"){frm.controller.value="register";$("ecr_stat_project").innerHTML=jgettext("Register project...");submitform("register");return}var a=$("ecr_project").value;if(a){document.id("ecr_stat_project").set("html",jgettext("Loading project..."))}submitform("stuffer")}function easySubmit(b,a){document.adminForm.controller.value=a;submitform(b)}function registerProject(c,a,b){form=document.adminForm;form.ecr_project_type.value=c;form.ecr_project_name.value=a;form.ecr_project_scope.value=b;form.controller.value="starter";submitbutton("register_project")}var lastId;function ecr_loadFile(a,b,d,c){url="index.php?option=com_easycreator&format=raw&tmpl=component&controller=ajax";url+="&file_path="+b+"&file_name="+d;legal_exts=["php","xml","ini","css","js","html","txt","sql","brainfuck","po","pot"];legal_pics=["jpg","png","gif","ico"];ext=d.substr(d.lastIndexOf(".")+1);found=false;for(key in legal_exts){if(legal_exts[key]==ext){found="file";break}}if(!found){for(key in legal_pics){if(legal_pics[key]==ext){found="pic";break}}if(!found){alert("Unsupported extension: "+ext);return}}switch(found){case"file":cl=$("ecr_title_file").className;$("ecr_title_file").className=cl+" ajax_loading16";new Request({url:url+"&task=loadFile",onRequest:function(){$("ecr_title_file").innerHTML=jgettext("Loading...")},onComplete:function(e){var f=JSON.decode(e,true);if(!f.status){$("ecr_title_file").innerHTML=f.text}else{editAreaLoader.setValue("ecr_code_area","");editAreaLoader.setValue("ecr_code_area",f.text);editAreaLoader.execCommand("ecr_code_area","change_syntax",ext);editAreaLoader.show("ecr_code_area");editAreaLoader.setSelectionRange("ecr_code_area",0,0);$("ecr_title_file").innerHTML=d}if(lastId!=undefined){$(lastId).setStyle("color","black");$(c).setStyle("color","blue")}else{$(c).setStyle("color","blue")}lastId=c;frm=document.adminForm;frm.file_path.value=b;frm.file_name.value=d;$("ecr_title_file").className=cl;sld_picture.hide();sld_edit_area.show()}}).send();break;case"pic":new Request({url:url+"&task=loadPic",onRequest:function(){$("ecr_title_pic").innerHTML=jgettext("Loading...")},onComplete:function(e){if(lastId!=undefined){$(lastId).setStyle("color","black")}$(c).setStyle("color","red");lastId=c;frm=document.adminForm;frm.file_path.value=b;frm.file_name.value=d;var f=JSON.decode(e);if(!f.status){$("ecr_title_file").innerHTML=f.text}else{$("ecr_title_pic").innerHTML=d;$("container_pic").innerHTML=f.text;sld_picture.show()}}}).send();break}}function toggleDiv(a){document.id(a).style.display=(document.id(a).style.display=="none")?"block":"none"}function getElement(b,a){if(document.layers){a=(a)?a:self;if(a.document.layers[b]){return a.document.layers[b]}for(W=0;W<a.document.layers.length;W++){return(getElement(b,a.document.layers[W]))}}if(document.all){return document.all[b]}return document.getElementById(b)}function emptyCheckTheField(f,c){var e=1;var b=f.elements[c];var a=(typeof(b.value.replace)!="undefined");if(!a){e=(b.value=="")?1:0}else{var d=new RegExp("\\s+");e=(b.value.replace(d,"")=="")?1:0}return e}function checkVersion(){var a=new Request.HTML({method:"post",url:"http://joomla.org",data:{"do":"1"},onRequest:function(){$("ecr_versionCheck").innerHTML=jgettext("Checking...")},onComplete:function(b){$("ecr_versionCheck").innerHTML=b}}).send()}function xcheckVersion(){var a="http://inkubator.der-beta-server.de/releases";url=a+"/easycreator.html";url+="?myVersion="+ECR_VERSION;url="http://joomla.org";new Request({url:url,onRequest:function(){$("ecr_versionCheck").innerHTML=jgettext("Checking...")},onFailure:function(b){$("ecr_versionCheck").innerHTML='<b style="color: red;">'+jgettext("Server error")+"</b>"+url;return""},onComplete:function(c){var f=JSON.decode(c);if("undefined"==f.status){e="? bad coder error..";return}var b="";var e="";var d="";switch(f.status){case -1:b="img outdated";e=phpjs.sprintf(jgettext("The Latest EasyCreator version is: %s"),f.version);break;case 0:b="img actual";d=jgettext("Your version is up-to-date");break;default:e=jgettext("Unknown version - maybe SVN ?");break}$("ecr_versionCheck").innerHTML='<span class="'+b+'" title="'+d+'" alt="'+d+'">'+e+"</span>"}}).send()};