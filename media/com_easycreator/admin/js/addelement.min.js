function addNewElement(a){aFields=a.split(",");valid=true;for(var b=0;b<aFields.length;b++){eName=aFields[b].replace(/^\s+/,"");if(eName){val=$(eName).value;if($(eName).value==""){$(eName+"_label").setStyles({color:"red"});valid=false}else{$(eName+"_label").setStyles({color:"black"})}}}if(!valid){document.id("addElementMessage").innerHTML='<div style="color: red;">'+jgettext("Please review your input")+"</div>";var c=document.id("addElementMessage").setStyles({display:"block",opacity:0});new Fx.Tween(c,$extend({property:"opacity"}),{duration:1500}).start(1);div_new_element.slideIn();return""}else{submitform("new_element")}}function removeElement(a,c){var e=document.getElementById(c);var b=document.getElementById(a);e.removeChild(b)}function getTableFields(a){document.id("addPartTableFields").innerHTML=jgettext("Loading...");link="index.php?option=com_easycreator&controller=ajax&task=show_tablefields&tmpl=component";new Request({url:link+"&table_name="+a,update:"addPartTableFields",onComplete:function(){div_new_element.show()}}).send()}function explode(c,e,a){var f={0:""};if(arguments.length<2||typeof arguments[0]=="undefined"||typeof arguments[1]=="undefined"){return null}if(c===""||c===false||c===null){return false}if(typeof c=="function"||typeof c=="object"||typeof e=="function"||typeof e=="object"){return f}if(c===true){c="1"}if(!a){return e.toString().split(c.toString())}else{var g=e.toString().split(c.toString());var d=g.splice(0,a-1);var b=g.join(c.toString());d.push(b);return d}}function addPackageElement(i,e,a,j,h,b){switch(i){case"module":var c=document.id("divPackageElementsModules");var d=document.id("totalPackageElementsModules");var g=(document.id("totalPackageElementsModules").value-1)+2;d.value=g;var f="divPackageElementsModules"+g+"Div";var k="divPackageElementsModules";attrib1="Client";break;case"plugin":var c=document.id("divPackageElementsPlugins");var d=document.id("totalPackageElementsPlugins");var g=(document.id("totalPackageElementsPlugins").value-1)+2;d.value=g;var f="divPackageElementsPlugins"+g+"Div";var k="divPackageElementsPlugins";attrib1="Group";break;default:alert("UNDEFINED "+i);return;break}var l=document.createElement("div");l.setAttribute("id",f);text="";link="";image="";html='<table style="border-bottom: 1px solid grey;"><tr>';html+="<td>";html+=projectSelector(i,g,j);html+="</td><td>";html+='<div style="float: right" class="btn" onclick="removeElement(\''+f+"', '"+k+'\')"><i class="img icon16-delete"></i>'+jgettext("Delete")+"</div>";html+="</td>";html+="</tr><tr>";html+="<td>";html+='<span class="ecr_label2">'+attrib1+'</span><input type="text" readonly="readonly" style="background-color: #f0f0f0;" name="package_'+i+"["+g+'][client]" id="package_'+i+"_"+g+'_client" value="'+e+'">';html+='<span class="ecr_label2">'+i+'</span><input type="text" readonly="readonly" style="background-color: #f0f0f0;" name="package_'+i+"["+g+'][name]" id="package_'+i+"_"+g+'_name" value="'+a+'">';html+="</td>";html+="</tr><tr>";html+="<td>";if(i!="plugin"){html+='<span class="ecr_label2">Position</span><input type="text" name="package_'+i+"["+g+'][position]" value="'+h+'">'}html+='<span class="ecr_label2">ordering</span><input type="text" name="package_'+i+"["+g+'][ordering]" value="'+b+'">';html+="</td>";html+="</tr></table>";l.innerHTML=html;c.appendChild(l)}function projectSelector(d,a,c){html="";html+='<select name="package_'+d+"["+a+'][title]" id="package_'+d+"_"+a+'" onchange="updateProject(\''+d+"', '"+a+'\');" style="font-size: 1.3em;">';html+="<option value=''>"+jgettext("Select...")+"</option>\n";for(var b in definedProjects[d+"s"]){html+="<option value='"+b+"'";if(b==c){html+=" selected='selected'"}html+=">"+b+"</option>\n"}html+="</select>\n";return html}function updateProject(b,a){selection=$("package_"+b+"_"+a).value;client=(selection)?definedProjects[b+"s"][selection]["client"]:"";name=(selection)?definedProjects[b+"s"][selection]["name"]:"";$("package_"+b+"_"+a+"_name").value=name;$("package_"+b+"_"+a+"_client").value=client};