<?php/** * * Description * * @package    tsmart * @subpackage Currency * @author RickG * @link http://www.tsmart.net * @copyright Copyright (c) 2004 - 2010 tsmart Team. All rights reserved. * @license http://www.gnu.org/copyleft/gpl.html GNU/GPL, see LICENSE.php * tsmart is free software. This version may have been modified pursuant * to the GNU General Public License, and as distributed it includes or * is derivative of works licensed under the GNU General Public License or * other free or open source software licenses. * @version $Id: default.php 8534 2014-10-28 10:23:03Z Milbo $ */// Check to ensure this file is included in Joomla!defined('_JEXEC') or die('Restricted access');$app = JFactory::getApplication();$input = $app->input;$show_edit_in_line = $input->get('show_edit_in_line', 0, 'int');$cid = $input->get('cid', array(), 'array');$listOrder = $this->escape($this->lists['filter_order']);$listDirn  = $this->escape($this->lists['filter_order_Dir']);$saveOrder = $listOrder == 'ordering';$doc=JFactory::getDocument();$doc->addScript(JUri::root().'administrator/components/com_tsmart/assets/js/view_tourfaq_default.js');if ($saveOrder){    $saveOrderingUrl = 'index.php?option=com_tsmart&controller=tourfaq&task=saveOrderAjax&tmpl=component';    JHtml::_('sortablelist.sortable', 'city_area_list', 'adminForm', strtolower($listDirn), $saveOrderingUrl);}AdminUIHelper::startAdminArea($this);?><?phprequire_once JPATH_ROOT . DS . 'administrator/components/com_tsmart/helpers/tsmproduct.php';echo tsmproduct::get_html_tour_information($this, $this->tsmart_product_id);?>    <div class="view-tourfaq-default">        <form action="index.php" method="post" name="adminForm" id="adminForm">            <div id="editcell">                <div class="vm-page-nav">                    <?php echo AdminUIHelper::render_pagination($this->pagination) ?>                </div>                <table class="adminlist table table-striped table-bordered" id="city_area_list" cellspacing="0" cellpadding="0">                    <thead>                    <tr>                        <?php if($show_edit_in_line){ ?>                        <th class="admin-checkbox">                            <label class="checkbox"><input type="checkbox" name="toggle" value=""                                                           onclick="Joomla.checkAll(this)"/><?php  echo $this->sort('tsmart_transfer_addon_id','Id') ; ?></label>                        </th>                        <th>                            <?php echo $this->sort('question_category', JText::_('Question category')); ?>                        </th>                        <th>                            <?php echo $this->sort('question',JText::_('Question')); ?>                        </th>                        <th>                            <?php echo $this->sort('answer',JText::_('Answer')); ?>                        </th>                        <th>                            <?php echo $this->sort('phone_code',JText::_('Author')); ?>                        </th>                        <th>                            <?php echo $this->sort('modified_on',JText::_('Add date') ); ?>                        </th>                        <th>                            <?php echo $this->sort('view_time',JText::_('view time') ); ?>                        </th>                        <?php }else{ ?>                            <th class="admin-checkbox">                                <label class="checkbox"><input type="checkbox" name="toggle" value=""                                                               onclick="Joomla.checkAll(this)"/><?php  echo $this->sort('tsmart_transfer_addon_id','Id') ; ?></label>                            </th>                            <th>                                <?php echo $this->sort('faq_name', JText::_('Question name')); ?>                            </th>                            <th>                                <?php echo $this->sort('answer',JText::_('Answer')); ?>                            </th>                            <th>                                <?php echo $this->sort('phone_code',JText::_('Author')); ?>                            </th>                            <th>                                <?php echo $this->sort('modified_on',JText::_('Add date') ); ?>                            </th>                            <th>                                <?php echo $this->sort('view_time',JText::_('view time') ); ?>                            </th>                        <?php } ?>                        <th width="70">                            <?php echo tsmText::_('Action'); ?>                        </th>                        <?php /*	<th width="10">				<?php echo vmText::_('com_tsmart_SHARED'); ?>			</th> */ ?>                    </tr>                    </thead>                    <?php                    $k = 0;                    $add_new = $show_edit_in_line == 1 && count($cid) == 0;                    if ($add_new) {                        $item = new stdClass();                        $item->published = 1;                        array_unshift($this->items, $item);                    }                    for ($i = 0, $n = count($this->items); $i < $n; $i++) {                        $row = $this->items[$i];                        $checked = JHtml::_('grid.id', $i, $row->tsmart_faq_id);                        $published = $this->gridPublished($row, $i);                        $editlink = JROUTE::_('index.php?option=com_tsmart&view=tourfaq&task=edit_in_line&cid[]=' . $row->tsmart_faq_id.'&tsmart_product_id='.$this->tsmart_product_id);                        $edit = $this->gridEdit($row, $i, 'tsmart_faq_id', $editlink);                        $save_link = JROUTE::_('index.php?option=com_tsmart&view=tourfaq&task=save_in_line&cid[]=' . $row->tsmart_faq_id);                        $save = $this->grid_save_in_line($row, $i, 'tsmart_faq_id', $save_link);                        $delete = $this->grid_delete_in_line($row, $i, 'tsmart_faq_id');                        $cancel = $this->grid_cancel_in_line($row, $i, 'tsmart_faq_id');                        $show_edit = ($show_edit_in_line == 1 && in_array($row->tsmart_faq_id, $cid)) || ($show_edit_in_line == 1 && count($cid) == 0 && $i == 0);                        ?>                        <tr class="row<?php echo $k; ?>">                            <?php if($show_edit_in_line){ ?>                                <td class="admin-checkbox">                                    <?php if ($show_edit) { ?>                                    <?php echo $checked ?>                                    <?php }else{ ?>                                    <?php } ?>                                </td>                                <td class="left">                                    <?php if ($show_edit) { ?>                                        <?php echo VmHTML::select_question_category('tsmart_categoryfaq_id', $row->tsmart_categoryfaq_id,''); ?>                                    <?php }else{ ?>                                        <?php echo $row->categoryfaq_name ?>                                    <?php } ?>                                </td>                                <td class="left">                                    <?php if ($show_edit) { ?>                                        <?php echo VmHTML::select_question('tsmart_faq_id', $row->tsmart_faq_id,'','select[name="tsmart_categoryfaq_id"]'); ?>                                    <?php }else{ ?>                                        <?php echo $row->faq_name ?>                                    <?php } ?>                                </td>                                <td class="left">                                    <?php echo TSMUtility::truncate(htmlentities($row->answer)) ?>                                </td>                                <td align="left">                                    <?php echo JHtml::_('date', $row->modified_on, tsmConfig::$date_format); ?>                                </td>                                <td align="left">                                    <?php echo $row->author ?>                                </td>                                <td align="left">                                </td>                            <?php }else{ ?>                                <td class="admin-checkbox">                                    <?php echo VmHTML::inputHidden(array(tsmart_faq_id => $row->tsmart_faq_id)); ?>                                    <?php echo $checked ?>                                </td>                                <td align="left">                                    <a href="<?php echo $editlink; ?>"><?php echo $row->faq_name; ?></a>                                </td>                                <td align="left">                                    <?php echo TSMUtility::truncate(htmlentities($row->answer)) ?>                                </td>                                <td align="left">                                    <?php echo TSMUtility::truncate(htmlentities($row->answer)) ?>                                </td>                                <td align="left">                                    <?php echo JHtml::_('date', $row->modified_on, tsmConfig::$date_format); ?>                                </td>                                <td align="left">                                </td>                            <?php } ?>                            <td align="center">                                <?php if ($show_edit) { ?>                                    <?php echo $add_new ? '' : $published; ?>                                    <?php echo $save; ?>                                    <?php echo $cancel; ?>                                    <?php echo VmHTML::inputHidden(array(published => $row->published)); ?>                                <?php } else { ?>                                    <?php echo $published; ?>                                    <?php echo $edit; ?>                                    <?php echo $delete; ?>                                <?php } ?>                            </td>                        </tr>                        <?php                        $k = 1 - $k;                    }                    ?>                    <tfoot>                    <tr>                        <td colspan="11">                            &nbsp;                        </td>                    </tr>                    </tfoot>                </table>            </div>            <?php echo VmHTML::inputHidden(array(                'key[tsmart_product_id]'=>$this->tsmart_product_id            )); ?>            <input type="hidden" name="tsmart_product_id" value="<?php echo $this->tsmart_product_id ?>">            <?php echo $this->addStandardHiddenToForm(); ?>            <?php echo JHtml::_('form.token'); ?>        </form>    </div><?php AdminUIHelper::endAdminArea(); ?><?php$js_content = '';ob_start();?>    <script type="text/javascript">        jQuery(document).ready(function ($) {            $('.view-tourfaq-default').view_tourfaq_default({            });        });    </script><?php$js_content = ob_get_clean();$js_content = TSMUtility::remove_string_javascript($js_content);$doc->addScriptDeclaration($js_content);